(()=>{"use strict";const t=document.querySelector(".js-control-panel");function e(t,e,i){t.querySelector("& > .js-ripple-wrapper")||(t.rippleWrapper=document.createElement("div"),t.rippleWrapper.classList.add("ripple-wrapper","js-ripple-wrapper"),t.append(t.rippleWrapper));const s=t.getBoundingClientRect(),n=document.createElement("span");n.style.left=e.clientX-s.x+"px",n.style.top=e.clientY-s.y+"px";const o=e.clientX-s.x>s.right-e.clientX?s.x:s.right,a=e.clientY-s.y>s.bottom-e.clientY?s.y:s.bottom,r=2*Math.sqrt(Math.pow(e.clientX-o,2)+Math.pow(e.clientY-a,2));n.style.width=`${r}px`,n.classList.add("ripple-click",`ripple-click--${i}`,"ripple-click--fade-in"),t.rippleWrapper.append(n);const l=[...n.getAnimations()].find((t=>"ripple-click__animation--fade-in"===t.animationName));function d(){n.classList.replace("ripple-click--fade-in","ripple-click--fade-out"),[...n.getAnimations()].find((t=>"ripple-click__animation--fade-out"===t.animationName)).finished.then((()=>{n.remove()})).catch((()=>{n.remove()}))}l.finished.then((()=>{l.commitStyles()})).catch((()=>{n.remove()})),t.addEventListener("mouseup",(()=>{l.finished.then((()=>{d()})).catch((()=>{n.remove()}))})),t.addEventListener("mouseleave",(t=>{l.finished.then((()=>{d()})).catch((()=>{n.remove()}))}))}class i{active=!1;visible=!1;onopen=null;onclose=null;relatedEmList=[];constructor(t,i){t.nodeType?this.content=t:this.content=t.content,this.modal=this.content.closest(".js-modal"),this.modal.inert=!0,this.container=this.modal.closest(".js-modal-container"),this.toggleButton=this.container?.querySelector(".js-modal-toggle-button")||t.toggleButton,this.closeButton=this.modal.querySelector(".js-modal-close-button"),this.toggleButton&&(this.modal.toggleButton=this.toggleButton,this.modal.toggleButton.modal=this.modal,this.toggleButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.toggleButton.addEventListener("click",(t=>{this instanceof s&&0!==t.detail||this.toggle()}))),this.closeButton&&(this.closeButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.closeButton.addEventListener("click",(t=>{this.close()}))),i&&(this.options=i,this.options.detached&&this.modal.remove()),document.addEventListener("mousedown",(t=>{!this.modal.classList.contains("is-visible")||this.toggleButton?.contains(t.target)||this.modal.contains(t.target)||this.modal.contains(t.target.closest(".js-modal")?.toggleButton)||this.relatedEmList.find((e=>e.contains(t.target)))||t.target.closest(".js-toast")||this.close()}));const n=[this.modal];this.container?.contains(this.modal)&&n.push(this.toggleButton);for(const t of n)t.addEventListener("focusout",(t=>{!this.modal.classList.contains("is-visible")||!document.body.contains(t.relatedTarget)||this.toggleButton?.contains(t.relatedTarget)||this.modal.contains(t.relatedTarget)||this.modal.contains(t.relatedTarget.closest(".js-modal")?.toggleButton)||this.relatedEmList.find((e=>e.contains(t.relatedTarget)))||t.relatedTarget.closest(".js-toast")||this.close()}));document.addEventListener("keydown",(t=>{if(!this.modal.classList.contains("is-hidden")&&"Escape"===t.code){for(const t of this.modal.querySelectorAll(".js-modal-toggle-button"))if(!t.modal.inert)return;for(const t of this.relatedEmList)if(!t.closest(".js-modal").inert)return;this.close()}}))}open(){if(this.options?.detached){if([...document.body.children].includes(this.modal))return void this.modal.remove();this.moveToBody(),this.modal.style.transitionDuration=""}this.modal.classList.replace("is-hidden","is-visible"),this.toggleButton?.classList.replace("is-inactive","is-active"),this.modal.getAnimations().find((t=>"opacity"===t.transitionProperty))?.finished.then((()=>{this.modal.inert=!1,this.closeButton?.focus(),this.onopen?.call()})).catch((()=>{})),this.active=!0}close(){this.modal.classList.replace("is-visible","is-hidden"),this.toggleButton?.classList.replace("is-active","is-inactive"),this.toggleButton?.focus(),this.active=!1,this.modal.getAnimations().find((t=>"opacity"===t.transitionProperty))?.finished.then((()=>{this.options?.detached&&this.removeFromBody(),this.modal.inert=!0})).catch((()=>{})),this.onclose?.call()}toggle(){this.active?this.close():this.open()}moveToBody(){if(document.body.append(this.modal),this.buttonRect=this.toggleButton?.getBoundingClientRect(),this.top=this.options?.top||this.buttonRect?.bottom||document.body.clientHeight/2-this.modal.clientHeight/2,this.left=this.options?.left||this.buttonRect?.x||document.body.clientWidth/2-this.modal.clientWidth/2,this.modal.style.transitionDuration="0ms",this.modal.style.top=this.top-0+"px",this.modal.style.left=this.left-0+"px",this.modal.zIndex=document.body.querySelectorAll("& > .modal").length+100,this.modal.style.zIndex=this.modal.zIndex,this instanceof s){this.modal.style.minWidth=`${this.toggleButton.clientWidth}px`;const t=this.modal.getBoundingClientRect(),e=this.toggleButton.getBoundingClientRect(),i=e.y,s=document.documentElement.clientHeight-e.bottom;this.modal.style.maxHeight=`${Math.max(i,s)}px`,t.bottom+10>document.documentElement.clientHeight&&i>s?(this.modal.style.top=e.y-this.modal.clientHeight+"px",this.modal.classList.add("modal--offset-top")):this.modal.classList.remove("modal--offset-top"),t.right>document.documentElement.clientWidth&&(this.modal.style.left=this.left-this.modal.clientWidth+"px")}}removeFromBody(){this.modal.style.top="",this.modal.style.left="",this.modal.style.zIndex="",this.modal.remove()}}class s extends i{constructor(t,i,s){super(t,{detached:!0}),this.type=s?.type,this.toggleButton.addEventListener("mousedown",(t=>{this.active?this.toggleButton.addEventListener("mouseup",(t=>{this.close()}),{once:!0}):this.open()})),this.toggleButton.addEventListener("keydown",(t=>{["ArrowDown","ArrowUp"].includes(t.code)&&!this.active&&this.open()})),document.body.addEventListener("scroll",(t=>{this.modal.inert||this.modal.classList.contains("is-hidden")||this.modal.contains(t.target)||this.close()}),!0),i&&(this.items={array:[...this.content.getElementsByTagName("li")],active:null,activeIndex:0,keySearch:{key:null,indexCurrent:0,indexTemp:0,indexArray:[]}},new MutationObserver((()=>{this.modal.classList.contains("is-visible")?this.items.active?this.items.active.button.focus():this.items.array[0].button.focus():this.resetKeySearch()})).observe(this.modal,{attributes:!0}),this.items.array.map((t=>{t.button=t.querySelector("button"),t.button.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),t.button.addEventListener("mouseup",(t=>{this.close(),this.type?this.select(t.currentTarget):(t.currentTarget.function?.(),this.defaultFunction?.())})),t.button.addEventListener("click",(t=>{t.detail>0||(this.close(),this.type?this.select(t.currentTarget):(t.currentTarget.function?.(),this.defaultFunction?.()))}))})),this.type&&(this.toggleButton.textEm=this.toggleButton.querySelector(".js-inner-text")||this.toggleButton,this.select(0,!0)),i.map((t=>{t.button&&(t.button.function=t.function)})),this.defaultFunction=i.find((t=>"function"==typeof t)),document.addEventListener("keydown",(t=>{if(!this.modal.inert)if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].includes(t.key))t.preventDefault(),["ArrowUp","ArrowLeft"].includes(t.key)?this.items.keySearch.indexCurrent>=1?this.items.keySearch.indexCurrent--:this.items.keySearch.indexCurrent=this.items.array.length-1:["ArrowDown","ArrowRight"].includes(t.key)?this.items.keySearch.indexCurrent<=this.items.array.length-2?this.items.keySearch.indexCurrent++:this.items.keySearch.indexCurrent=0:"PageDown"===t.key?this.items.keySearch.indexCurrent=this.items.array.findLastIndex((t=>t.offsetTop<this.content.scrollTop+this.modal.clientHeight-this.items.array[0].clientHeight)):"PageUp"===t.key?this.items.keySearch.indexCurrent=this.items.array.findIndex((t=>t.offsetTop>this.content.scrollTop-this.modal.clientHeight+this.items.array[0].clientHeight)):"Home"===t.key?this.items.keySearch.indexCurrent=0:"End"===t.key&&(this.items.keySearch.indexCurrent=this.items.array.length-1),this.items.keySearch.indexTemp=-1,this.items.array[this.items.keySearch.indexCurrent].button.focus(),this.items.array[this.items.keySearch.indexCurrent].button.scrollIntoView();else{if(this.items.keySearch.indexArray.length=0,this.items.array.forEach(((e,i)=>{e.innerText[0].toLowerCase()===t.key.toLowerCase()&&this.items.keySearch.indexArray.push(i)})),!this.items.keySearch.indexArray.length)return;this.items.keySearch.key===t.key.toLowerCase()?(this.items.array[this.items.keySearch.indexArray[++this.items.keySearch.indexTemp]]||(this.items.keySearch.indexTemp=0),this.items.keySearch.indexCurrent=this.items.keySearch.indexArray[this.items.keySearch.indexTemp]):(this.items.keySearch.indexTemp=0,this.items.keySearch.indexCurrent=this.items.keySearch.indexArray[this.items.keySearch.indexTemp],this.items.keySearch.key=t.key.toLowerCase()),this.items.array[this.items.keySearch.indexArray[this.items.keySearch.indexTemp]].button.focus(),this.items.array[this.items.keySearch.indexArray[this.items.keySearch.indexTemp]].button.scrollIntoView()}})))}select(t,e){this.items.active?.button.classList.remove("is-selected"),this.items.active=this.items.array[t]||t.closest("li"),this.items.active.button.classList.add("is-selected"),this.items.activeIndex=this.items.array.indexOf(this.items.active),this.items.keySearch.indexCurrent=this.items.activeIndex;const i=this.items.active.textContent.trim();this.toggleButton.textEm.textContent=i,this.container.dataset.selectedOption=i,e||(this.items.active.button.function?.(),this.defaultFunction?.())}resetKeySearch(){this.items.keySearch.key=null,this.items.keySearch.indexCurrent=this.items.activeIndex,this.items.keySearch.indexTemp=0,this.items.keySearch.indexArray=[]}}class n{active=!1;constructor(t,i){this.container=t,this.body=t.querySelector(".js-accordion__body"),this.toggleButton=t.querySelector(".js-accordion__button-toggle"),this.toggleButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.toggleButton.addEventListener("click",(()=>{this.toggle()})),new MutationObserver((()=>{this.active&&(this.body.style.maxHeight=`${this.body.scrollHeight}px`)})).observe(this.body,{childList:!0}),this.body.addEventListener("transitionend",(t=>{this.active||"max-height"!==t.propertyName||(this.body.style.overflow="hidden")})),(this.active=i||!1)?this.open():this.close()}open(){this.container.classList.remove("is-collapsed"),this.body.style.maxHeight=`${this.body.scrollHeight}px`,this.body.style.overflow="",this.body.inert=!1,this.active=!0}close(){this.container.classList.add("is-collapsed"),this.body.style.maxHeight="0px",this.body.inert=!0,this.active=!1}toggle(){this.active?this.close():this.open()}}class o{static lastActive=null;constructor(t,e,i=t){this.em=t,this.anchor=i;const s=document.importNode(document.querySelector(".js-tooltip-t").content,!0);this.tooltip=s.querySelector(".js-tooltip"),this.tooltip.content=s.querySelector(".js-tooltip-content"),this.tooltip.content.append(e),this.hasFocus=!1,this.hasHover=!1,this.em.tooltipObject=this,this.ignoreFocus=!1,this.disabled=!1,this.showTimeoutId=null,this.hideTimeoutId=null,this.em.addEventListener("keyup",(t=>{this.disabled||document.body.contains(this.tooltip)||"Tab"===t.code&&this.moveToBody()})),this.em.addEventListener("focusout",(t=>{document.body.contains(this.tooltip)?(clearTimeout(this.hideTimeoutId),this.tooltip.remove()):clearTimeout(this.showTimeoutId)})),this.em.addEventListener("keydown",(t=>{document.body.contains(this.tooltip)?(clearTimeout(this.hideTimeoutId),this.tooltip.remove()):clearTimeout(this.showTimeoutId)})),this.em.addEventListener("mouseenter",(t=>{this.disabled||(document.body.contains(this.tooltip)?clearTimeout(this.hideTimeoutId):this.showTimeoutId=setTimeout((()=>{this.moveToBody()}),250))})),this.em.addEventListener("mouseleave",(t=>{document.body.contains(this.tooltip)?this.hideTimeoutId=setTimeout((()=>{this.removeFromBody()}),250):clearTimeout(this.showTimeoutId)})),document.addEventListener("keydown",(t=>{if("Escape"===t.code)return document.body.contains(this.tooltip)?(clearTimeout(this.hideTimeoutId),void this.removeFromBody()):void clearTimeout(this.showTimeoutId)})),document.addEventListener("mousedown",(t=>{if(document.body.contains(this.tooltip))return clearTimeout(this.hideTimeoutId),void this.removeFromBody();clearTimeout(this.showTimeoutId)}))}changeContent(t){this.tooltip.textContent=t}disable(){this.disabled=!0,this.removeFromBody()}moveToBody(){document.body.append(this.tooltip);const t=this.anchor.getBoundingClientRect();this.tooltip.style.top=t.y-this.tooltip.clientHeight-10+"px",this.tooltip.style.left=t.x-(this.tooltip.clientWidth/2-this.anchor.clientWidth/2)+"px";const e=this.tooltip.getBoundingClientRect();e.right+10>document.documentElement.clientWidth?this.tooltip.style.left=`${t.x-this.tooltip.clientWidth+this.anchor.clientWidth}px`:e.left-10<0&&(this.tooltip.style.left=`${t.x}px`),e.top-10<0&&(this.tooltip.style.top=`${t.bottom+10}px`),this.tooltip.classList.add("is-visible")}removeFromBody(){this.tooltip.classList.remove("is-visible");const t=[...this.tooltip.getAnimations()].find((t=>"opacity"===t.transitionProperty));t?.finished.then((()=>{this.tooltip.remove(),this.tooltip.style.top="",this.tooltip.style.left="",this.tooltip.style.translate=""})).catch((()=>{}))}}const a=document.querySelector(".js-app");class r{static em=document.querySelector(".js-list-collection");static emptyEm=document.querySelector(".js-list-collection-empty");static createListButton=document.querySelector(".js-list-collection-create-button");static deletedListArchive=[];constructor(){this.listArray=[]}addList(t){return this.listArray.unshift(t),t}render(){this.listArray.length?(this.contentFragment=document.createDocumentFragment(),this.listArray.forEach((t=>{this.contentFragment.append(p.createFragment(t))})),r.em.replaceChildren(r.createListButton,this.contentFragment),delete this.contentFragment):r.toggleEmpty(!0)}switchList(t){const e=this.findCurrentList(!0);e>-1&&(this.listArray[e].current=!1);const i=t||this.listArray[e+1]||this.listArray[e-1];if(i){i.current=!0,r.toggleEmpty(!1);for(const t of p.onswitch)t();return i}return r.toggleEmpty(!0),null}findCurrentList(t){if(this.listArray)return t?this.listArray.findIndex((t=>t.current)):this.listArray.find((t=>t.current))}static findCurrent(){return l}static toggleEmpty(t){r.emptyEm.classList.toggle("is-visible",t),r.emptyEm.inert=!t,a.inert=t}static saveToStorage(){localStorage.setItem("listCollection",JSON.stringify(r.findCurrent()))}}new o(r.createListButton,"Create list"),r.createListButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),r.createListButton.addEventListener("click",(t=>{C.modal.open()})),r.emptyEm.createUntitledBtn=r.emptyEm.querySelector(".js-list-collection-empty-create-untitled-btn"),r.emptyEm.createBtn=r.emptyEm.querySelector(".js-list-collection-empty-create-btn"),r.emptyEm.createUntitledBtn.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),r.emptyEm.createUntitledBtn.addEventListener("click",(t=>{const e=r.findCurrent(),i=e.addList(new p("Untitled"));e.switchList(i),i.render(),i.prepend()})),r.emptyEm.createBtn.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"lt")})),r.emptyEm.createBtn.addEventListener("click",(t=>{C.modal.open()}));const l=new r;class d{constructor(t,e,i){this.em=t,this.onStateOn=e,this.onStateOff=i,this.em.addEventListener("click",(t=>{t.detail>0||this.em.toggle()})),this.em.addEventListener("mousedown",(t=>{this.em.toggle()})),this.em.toggle=()=>{this.onStateOn&&this.onStateOff?this.em.classList.replace("is-inactive","is-active")?this.onStateOn():this.em.classList.replace("is-active","is-inactive")&&this.onStateOff():this.onStateOn&&(this.em.classList.toggle("is-inactive"),this.em.classList.toggle("is-active"),this.onStateOn())}}}class c{static emTemplate=document.querySelector(".js-toast-t");static trackEm=document.querySelector(".js-toast-track");constructor(t,e){if(this.options=e,this.toastFragment=document.importNode(c.emTemplate.content,!0),this.toast=this.toastFragment.querySelector(".js-toast"),this.toast.content=this.toast.querySelector(".js-toast-content"),this.toast.content.text=this.toast.querySelector(".js-toast-text"),this.toast.content.text.append(t),this.options?.type&&(this.toast.classList.add(`toast--${this.options.type}`),"error"===this.options.type?this.toast.content.before(document.importNode(c.emTemplate.content.querySelector(".js-toast-error-icon-t").content,!0)):"success"===this.options.type&&this.toast.content.before(document.importNode(c.emTemplate.content.querySelector(".js-toast-success-icon-t").content,!0))),this.toast.querySelector(".js-toast-close-button").addEventListener("mousedown",(t=>{o.finish()})),this.options?.buttonText){const t=document.createElement("button");t.classList.add("toast__action-button","js-toast-action-button"),t.textContent=this.options.buttonText,t.onclick=()=>{this.options.buttonFn(),o.finish()},this.toast.content.append(t)}const i=c.trackEm.querySelectorAll(".js-toast");if(i.length+1>3&&i[0].delete(),this.options?.modificator){this.toast.classList.add(`js-toast--${this.options.modificator}`);const t=[...i].filter((t=>t.className.includes(this.options.modificator)));t.length+1>1&&t.map((t=>t.delete()))}c.trackEm.append(this.toast);const s=new KeyframeEffect(this.toast,[{marginBottom:-this.toast.clientHeight+"px",opacity:0},{marginBottom:"calc(var(--s-sm) + 5px)",opacity:.5,offset:.05},{marginBottom:"var(--s-sm)",opacity:1,offset:.1},{marginBottom:"var(--s-sm)",opacity:1,offset:1}],{duration:3e3,timingFunction:"ease-in"}),n=new KeyframeEffect(this.toast,[{marginBottom:-this.toast.clientHeight+"px",opacity:0}],{duration:100,timingFunction:"ease-in"}),o=new Animation(s);o.play(),o.finished.then((()=>{this.toast.delete()})).catch((()=>{})),this.delayTimeoutId=null,this.toast.changeContent=t=>{this.toast.content.text.replaceChildren(t);const e=o.effect.getTiming().duration;o.currentTime>e/2&&(o.pause(),clearTimeout(this.delayTimeoutId),this.delayTimeoutId=setTimeout((()=>{o.finish()}),e/2))},this.toast.delete=()=>{this.toast.inert=!0;const t=new Animation(n);t.play(),t.finished.then((()=>{this.options?.closeFn?.(),this.toast.remove()}))}}}class h{static maxContentLength=300;static emTemplate=document.querySelector(".js-todo-t");static addStreak=0;static finishStreak=0;constructor(t,e=null,i="active",s=r.findCurrent().findCurrentList()){"object"==typeof arguments[0]?Object.assign(this,arguments[0]):(this.id=s.todoArray[0]?.id+1||1,this.content=t,this.dueDate=e,this.state=i,this.listId=s.id)}prepend(){p.em.prepend(h.createFragment(this)),p.em.scrollTo(0,0);const t=p.em.querySelector(".js-todo"),e=new KeyframeEffect(t,[{marginTop:`-${t.clientHeight}px`,opacity:0},{marginTop:"calc(10px + var(--s-base))",opacity:1,offset:.6},{marginTop:"var(--s-base)",opacity:1}],{duration:300,timingFunction:"ease-in"});new Animation(e).play(),h.addStreak++;const i=c.trackEm.querySelectorAll(".js-toast--todo-added");i.length>0&&h.addStreak>1?i[0].changeContent(h.addStreak+" todos were added"):(h.addStreak=1,new c("1 todo was added",{modificator:"todo-added",closeFn(){h.addStreak=0}}))}delete(){const t=r.findCurrent(),e=t.listArray.find((t=>t.id===this.listId));if(p.selectedTodoArray.includes(this)&&(p.selectedTodoArray.splice(p.selectedTodoArray.indexOf(this),1),p.updateSelected()),e.todoArray.splice(e.todoArray.indexOf(this),1),e.updateInfo(),p.deletedTodoArchive.push(this),e.id===p.em.dataset.id){const t=this.findElement();t.inert=!0;const e=new KeyframeEffect(t,[{marginTop:"0px",opacity:1},{marginTop:`calc(-${t.clientHeight}px - 10px)`,opacity:0,offset:.6},{marginTop:`-${t.clientHeight}px`,opacity:0}],{duration:300,timingFunction:"ease-in"}),i=new Animation(e);i.play(),i.finished.then((()=>{t.remove();const e=p.em.querySelectorAll(".js-todo-count");for(let t=0;t<e.length;t++)e[t].textContent=e.length-t}))}const i=c.trackEm.querySelectorAll(".js-toast--todo-deleted");i.length>0?i[0].changeContent(p.deletedTodoArchive.length+" todos were deleted"):new c("1 todo was deleted",{buttonText:"Undo",buttonFn:()=>{p.deletedTodoArchive.forEach((e=>{const i=t.listArray.find((t=>t.id===e.listId));if(!i)return;e.id=i.todoArray[0]?.id+1||1;const s=i.addTodo(e);i.id===p.em.dataset.id&&s.prepend()}))},closeFn:()=>{p.deletedTodoArchive.length=0},modificator:"todo-deleted"})}toggleState(){const t=r.findCurrent().listArray.find((t=>t.id===this.listId));if("active"===this.state){if(this.state="finished",t.id===p.em.dataset.id){const t=this.findElement();t.classList.replace("todo--active","todo--finished"),t.finishButton.tooltip.changeContent("Unfinish todo"),t.finishButton.replaceChildren(document.importNode(h.emTemplate.content.querySelector(".js-todo-unfinish-icon-t").content,!0))}const e=t.todoArray.length-t.finishedCount,i=c.trackEm.querySelectorAll(".js-toast--todo-finished");h.finishStreak++,i.length>0&&h.finishStreak>1?i[0].changeContent(h.finishStreak+" todos were finished! "+(e>1?e+" todos left":1===e?"1 todo left":e<1&&"All finished!")):(h.finishStreak=1,new c("1 todo was finished! "+(e>1?e+" todos left":1===e?"1 todo left":e<1&&"All finished!"),{modificator:"todo-finished",closeFn(){h.finishStreak=0}}))}else{if(this.state="active",t.id===p.em.dataset.id){const t=this.findElement();t.classList.replace("todo--finished","todo--active"),t.finishButton.tooltip.changeContent("Finish todo"),t.finishButton.replaceChildren(document.importNode(h.emTemplate.content.querySelector(".js-todo-finish-icon-t").content,!0))}const e=t.todoArray.length-t.finishedCount,i=c.trackEm.querySelectorAll(".js-toast--todo-unfinished");h.finishStreak--,i.length>0?i[0].changeContent(e>1?e+" todos left":"1 todo left"):new c(e>1?e+" todos left":"1 todo left",{modificator:"todo-unfinished"})}t.updateInfo()}select(){p.selectedTodoArray.includes(this)?p.selectedTodoArray.splice(p.selectedTodoArray.indexOf(this),1):p.selectedTodoArray.push(this),p.updateSelected()}findElement(){return p.em.querySelector(`[data-todo-id="${this.id}"`)}static createFragment(t){const i=r.findCurrent().listArray.find((e=>e.id===t.listId)),s=document.importNode(h.emTemplate.content,!0),n=s.querySelector(".js-todo");n.dataset.todoId=t.id,n.classList.add(`todo--${t.state}`),n.addEventListener("mousedown",(t=>{"BUTTON"!==t.target.nodeName?n.dataset.pressed=!0:delete n.dataset.pressed})),n.addEventListener("mouseup",(t=>{n.dataset.pressed&&(m(!0),n.focus())})),n.addEventListener("focusout",(t=>{n.contains(t.relatedTarget)||m(!1)})),n.addEventListener("keydown",(e=>{if("Enter"===e.code||"Space"===e.code){if(n.checkbox.contains(e.target)||u.contains(e.target))return;c.contains(e.target)?t.delete():n.finishButton.contains(e.target)&&t.toggleState(),m(),n.focus()}else"Escape"===e.code&&m(!1)})),n.checkbox=s.querySelector(".js-checkbox"),new d(n.checkbox,(()=>{t.select()})),new o(n.checkbox,"Select todo");const a=s.querySelector(".js-todo-count");if(i.contentFragment?a.textContent=i.todoArray.length-i.contentFragment.childElementCount:a.textContent=p.em.childElementCount,n.content=s.querySelector(".js-todo-content"),n.content.text=s.querySelector(".js-todo-content-text"),n.content.text.textContent=t.content,t.dueDate){n.dueDate=s.querySelector(".js-todo-due-date");const e=new Intl.DateTimeFormat(navigator.language),i=e.formatToParts(t.dueDate);n.dueDate.dateTime=`${i.find((t=>"year"===t.type)).value}-${i.find((t=>"month"===t.type)).value}-${i.find((t=>"day"===t.type)).value}`,n.dueDate.textContent=e.format(t.dueDate)}const l=s.querySelector(".js-todo-buttons"),c=s.querySelector(".js-todo-delete-button");c.addEventListener("mousedown",(t=>{e(n,t,"todo-delete")})),c.addEventListener("click",(e=>{e.detail<1||(t.delete(),m(!1),n.focus())})),new o(c,"Delete todo"),n.finishButton=s.querySelector(".js-todo-finish-button"),n.finishButton.replaceChildren(document.importNode(s.querySelector("active"===t.state?".js-todo-finish-icon-t":".js-todo-unfinish-icon-t").content,!0)),n.finishButton.addEventListener("mousedown",(i=>{"active"===t.state&&e(n,i,"todo-finish")})),n.finishButton.addEventListener("click",(e=>{e.detail<1||(t.toggleState(),m(!1),n.focus())})),n.finishButton.tooltip=new o(n.finishButton,"active"===t.state?"Finish todo":"Unfinish todo");const u=s.querySelector(".js-todo-close-button");u.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),u.addEventListener("click",(t=>{m(!1),n.focus()})),new o(u,"Hide buttons");const m=(t=l.inert)=>{l.inert=!t,n.checkbox.inert=t,l.classList.toggle("is-hidden",!t),l.classList.toggle("is-visible",t)};return n}}class u{constructor(t,e,i){this.em=t,this.saveFn=e,this.options=i,this.savedValue=this.em.textContent.trim(),this.em.addEventListener("focus",(t=>{const e=document.createRange();e.selectNodeContents(this.em);const i=window.getSelection();i.removeAllRanges(),i.addRange(e),this.savedValue=this.em.textContent.trim()})),this.em.addEventListener("beforeinput",(t=>{const e=window.getSelection();this.em.textContent.length>=this.options.maxLength&&t.inputType.includes("insert")&&this.em.contains(e.anchorNode)&&Math.abs(e.anchorOffset-e.focusOffset)<1&&t.preventDefault()})),this.em.addEventListener("focusout",(t=>{this.em.textContent.trim()&&this.em.textContent.trim()!==this.savedValue&&this.save(),this.reset()})),this.em.addEventListener("keydown",(t=>{"Enter"===t.key?(t.preventDefault(),this.save(),this.reset()):"Escape"===t.key&&(t.stopPropagation(),this.reset())})),new MutationObserver((t=>{for(const e of t)for(const t of e.addedNodes)3!==t.nodeType&&"BR"!==t.nodeName&&t.remove()})).observe(this.em,{childList:!0})}reset(){this.em.textContent=this.savedValue,this.em.scrollLeft=0,this.em.blur(),window.getSelection().removeAllRanges(),this.options.autoDisable&&(this.em.contentEditable=!1)}save(){const t=this.em.textContent.trim();return!!t.length&&(this.savedValue=t,this.saveFn(),!0)}}const m={en:"US",hi:"IN",deva:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",bn:"BD",beng:"BD",rkt:"BD",dz:"BT",tibt:"BT",tn:"BW",am:"ET",ethi:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",he:"IL",hebr:"IL",jam:"JM",ja:"JP",jpan:"JP",km:"KH",khmr:"KH",ko:"KR",kore:"KR",lo:"LA",laoo:"LA",mh:"MH",my:"MM",mymr:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa_arab:"PK",lah:"PK",ps:"PK",sd:"PK",skr:"PK",gn:"PY",th:"TH",thai:"TH",tts:"TH",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arab:"EG",arz:"EG",fa:"IR",az_arab:"IR",dv:"MV",thaa:"MV"},f={AG:0,ATG:0,28:0,AS:0,ASM:0,16:0,BD:0,BGD:0,50:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PT:0,PRT:0,620:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,MV:5,MDV:5,462:5};function g(t){return function(t,e,i){if(t){var s,n=t.toLowerCase().split(/[-_]/),o=n[0],a=o;if(n[1]&&4===n[1].length?(a+="_"+n[1],s=n[2]):s=n[1],s||(s=e[a]||e[o]),s)return function(t,e){var i=e["string"==typeof t?t.toUpperCase():t];return"number"==typeof i?i:1}(s.match(/^\d+$/)?Number(s):s,i)}return 1}(t,m,f)}class p{static maxTitleLength=50;static emTemplate=document.querySelector(".js-list-t");static em=document.querySelector(".js-todo-list");static emptyEm=document.querySelector(".js-todo-list-empty");static selectedCounterEm=document.querySelector(".js-todo-selection-counter");static selectAllCheckbox=document.querySelector(".js-todo-select-all-checkbox");static deletedTodoArchive=[];static selectedTodoArray=[];static onupdate=[];static onrender=[];static onswitch=[];constructor(t="Untitled",e=((t=21)=>{let e="",i=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&i[t]];return e})(10),i=null,s=!1,n=[]){"object"==typeof arguments[0]?Object.assign(this,arguments[0]):(this.title=t,this.id=e,this.imageURL=i,this.current=s,this.todoArray=n)}render(t){const e=t||this.todoArray;this.contentFragment=document.createDocumentFragment(),e.forEach((t=>{this.contentFragment.append(h.createFragment(t))})),p.em.replaceChildren(this.contentFragment,p.emptyEm),p.em.dataset.id=this.id,delete this.contentFragment;for(const t of[...p.onrender,...p.onupdate])t();p.selectedTodoArray.length=0,p.updateSelected()}get finishedCount(){let t=0;for(let e=0;e<this.todoArray.length;e++)"finished"===this.todoArray[e].state&&t++;return t}prepend(){const t=p.createFragment(this);r.createListButton.after(t);const e=document.createElement("i");e.textContent=`"${this.title}"`;const i=document.createDocumentFragment();i.append(e," was added"),new c(i)}addTodo(t){return this.todoArray.unshift(t),this.updateInfo(),t}setTitle(t){this.title=t;const e=this.findElement();e.titleObject.em.textContent=e.titleObject.em.title=t;for(const t of p.onupdate)t();new c("Your changes are saved successfully!",{modificator:"list-title-changed",type:"success"})}updateInfo(){const t=this.findElement(),e={itemCount:this.todoArray.length,finishedCount:this.finishedCount};t.itemCountEm.textContent=e.itemCount,t.finishedCountEm.textContent=e.finishedCount;for(const t of p.onupdate)t();return e}delete(){const t=r.findCurrent(),e=p.em.dataset.id;this.current&&t.switchList()?.render(),t.listArray.splice(t.listArray.indexOf(this),1),r.deletedListArchive.push(this),this.findElement().remove();const i=c.trackEm.querySelectorAll(".js-toast--list-deleted");i.length>0?i[0].changeContent(r.deletedListArchive.length+" lists were deleted"):new c("1 list was deleted",{buttonText:"Undo",buttonFn:()=>{for(let e=r.deletedListArchive.length-1;e>=0;e--)t.addList(new p(r.deletedListArchive[e])).prepend();e!==r.deletedListArchive[0].id&&this.todoArray.length||t.switchList(t.listArray[0]).render()},closeFn:()=>{r.deletedListArchive.length=0},modificator:"list-deleted"})}deleteImage(){delete this.imageURL;const t=this.findElement();t.style.backgroundImage="",t.classList.remove("list--has-image")}deleteTodos(t){if(t&&t.length)for(let e=t.length-1;e>=0;e--)t[e].delete()}deleteAll(){this.deleteTodos(this.todoArray)}deleteFinished(){this.deleteTodos(this.todoArray.filter((t=>"finished"===t.state)))}finishTodos(t){if(t.length)for(let e=0;e<t.length;e++)t[e].toggleState()}finishAll(){this.finishTodos(this.todoArray.filter((t=>"finished"!==t.state)))}findElement(){return r.em.querySelector(`[data-list-id="${this.id}"]`)}static clearSelection(){[...p.em.querySelectorAll(".js-checkbox.is-active")].map((t=>t.toggle())),p.selectedTodoArray.length=0,delete p.selectedCounterEm.dataset.todoSelected,p.selectAllCheckbox.classList.replace("is-active","is-inactive")}static selectAll(){[...p.em.querySelectorAll(".js-checkbox.is-inactive")].map((t=>t.toggle()))}static updateSelected(){p.selectedCounterEm.dataset.todoSelected=p.selectedTodoArray.length,p.selectedTodoArray.length===p.em.querySelectorAll(".js-todo").length&&p.selectAllCheckbox.classList.replace("is-inactive","is-active"),p.selectedTodoArray.length||(delete p.selectedCounterEm.dataset.todoSelected,p.selectAllCheckbox.classList.replace("is-active","is-inactive"))}static filter(t,e="all"){if("all"===e)return[...t];if("thisDay"===e)return t.filter((t=>0===Date.compare(t.dueDate,new Date)));if("thisWeek"===e){const e=navigator.language,i=new Date,s=g(e),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()-i.getDay()-s),o=new Date(i.getFullYear(),i.getMonth(),i.getDate()-i.getDay()+6-s);return t.filter((t=>Date.compare(t.dueDate,n)>=0&&Date.compare(t.dueDate,o)<=0))}if("thisMonth"===e){const e=new Date;return t.filter((t=>new Date(t.dueDate).getMonth()===e.getMonth()&&new Date(t.dueDate).getFullYear()===e.getFullYear()))}return"thisYear"===e?t.filter((t=>new Date(t.dueDate).getFullYear()===(new Date).getFullYear())):void 0}static sort(t,e="addDate",i={left:0,right:t.length-1}){if("addDate"===e){if(!t)return;if(t.length<=1)return t;let e=i.left,s=i.right,n=Math.floor((e+s)/2);const o=t[n].id;for(;e<=s;){for(;t[e].id>o;)e++;for(;t[s].id<o;)s--;if(e<=s){const i=t[e];t[e]=t[s],t[s]=i,e++,s--}}return n=e,i.left<n-1&&p.sort(t,"addDate",{left:i.left,right:n-1}),n<i.right&&p.sort(t,"addDate",{left:n,right:i.right}),t}if("dueDate"===e){if(!t)return;if(t.length<=1)return t;let e=i.left,s=i.right,n=Math.floor((e+s)/2);const o=t[n];for(;e<=s;){for(;t[e].dueDate<o.dueDate||0===Date.compare(t[e].dueDate,o.dueDate)&&t[e].id>o.id;)e++;for(;t[s].dueDate>o.dueDate||0===Date.compare(t[s].dueDate,o.dueDate)&&t[s].id<o.id;)s--;if(e<=s){const i=t[e];t[e]=t[s],t[s]=i,e++,s--}}return n=e,i.left<n-1&&p.sort(t,"dueDate",{left:i.left,right:n-1}),n<i.right&&p.sort(t,"dueDate",{left:n,right:i.right}),t}if("activeFirst"===e){if(!t)return;if(t.length<=1)return t;let e=i.left,s=i.right,n=Math.floor((e+s)/2);const o=t[n];for(;e<=s;){for(;"active"===t[e].state&&"finished"===o.state||t[e].state===o.state&&t[e].id>o.id;)e++;for(;"finished"===t[s].state&&"active"===o.state||t[s].state===o.state&&t[s].id<o.id;)s--;if(e<=s){const i=t[s];t[s]=t[e],t[e]=i,e++,s--}}return n=e,i.left<n-1&&p.sort(t,"activeFirst",{left:i.left,right:n-1}),n<i.right&&p.sort(t,"activeFirst",{left:n,right:i.right}),t}if("finishedFirst"===e){if(!t)return;if(t.length<=1)return t;let e=i.left,s=i.right,n=Math.floor((e+s)/2);const o=t[n];for(;e<=s;){for(;"finished"===t[e].state&&"active"===o.state||t[e].state===o.state&&t[e].id>o.id;)e++;for(;"active"===t[s].state&&"finished"===o.state||t[s].state===o.state&&t[s].id<o.id;)s--;if(e<=s){const i=t[s];t[s]=t[e],t[e]=i,e++,s--}}return n=e,i.left<n-1&&p.sort(t,"finishedFirst",{left:i.left,right:n-1}),n<i.right&&p.sort(t,"finishedFirst",{left:n,right:i.right}),t}}static createFragment(t){const i=r.findCurrent(),n=document.importNode(p.emTemplate.content,!0),a=n.querySelector(".js-list");async function l(e){const i=new FormData;i.append("image",e),i.append("key","019e70ddcce1687f1f1fa8f51a55163f"),fetch("https://api.imgbb.com/1/upload",{method:"post",body:i}).then((t=>t.json())).then((e=>{t.imageURL=e.data.url,a.style.backgroundImage=`url(${t.imageURL})`,a.classList.add("list--has-image")})).catch((t=>console.log(t)))}return t.imageURL&&(a.style.backgroundImage=`url(${t.imageURL})`,a.classList.add("list--has-image")),a.dataset.listId=t.id,a.addEventListener("mousedown",(i=>{a.menu.toggleButton.contains(i.target)||a.titleObject.em.contains(i.target)&&a.titleObject.em.isContentEditable?delete a.dataset.pressed:(e(a,i,t.imageURL?"lt":"dk"),a.dataset.pressed=!0)})),a.addEventListener("mouseup",(e=>{a.dataset.pressed&&(y.close(),i.switchList(t).render())})),a.addEventListener("keydown",(e=>{if("Enter"===e.code||"Space"===e.code){if(a.menu.toggleButton.contains(e.target)||a.titleObject.em.contains(e.target))return;y.close(),i.switchList(t).render()}})),a.addEventListener("dragenter",(t=>{t.stopPropagation(),t.preventDefault(),t.currentTarget.classList.add("list--image-hint")})),a.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault()})),a.addEventListener("dragleave",(t=>{t.stopPropagation(),t.preventDefault(),t.currentTarget.contains(t.relatedTarget)||t.currentTarget.classList.remove("list--image-hint")})),a.addEventListener("drop",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),t.currentTarget.classList.remove("list--image-hint");let e=t.dataTransfer.files[t.dataTransfer.files.length-1];e.type.includes("image")&&l(e)})),a.imageInput=n.querySelector(".js-list-image-input"),a.imageInput.addEventListener("change",(function(){l(this.files[0])})),a.finishedCountEm=n.querySelector(".js-list-finished-count"),a.finishedCountEm.textContent=t.todoArray.filter((t=>"finished"===t.state)).length,a.itemCountEm=n.querySelector(".js-list-item-count"),a.itemCountEm.textContent=t.todoArray.length,a.menu=new s(n.querySelector(".js-list-menu"),[{button:n.querySelector(".js-change-title-list-btn"),function(){a.titleObject.em.contentEditable=!0,a.titleObject.em.focus()}},{button:n.querySelector(".js-delete-list-btn"),function(){t.delete()}},{button:n.querySelector(".js-finish-all-btn"),function(){t.finishAll()}},{button:n.querySelector(".js-delete-finished-btn"),function(){t.deleteFinished()}},{button:n.querySelector(".js-delete-all-btn"),function(){t.deleteAll()}},{button:n.querySelector(".js-change-img-btn"),function(){a.imageInput.click()}},{button:n.querySelector(".js-delete-img-btn"),function(){t.deleteImage()}}]),a.tooltip=new o(a.menu.toggleButton,"See options"),a.menu.toggleButton.onmousedown=t=>{e(t.currentTarget,t,"dk")},a.titleObject=new u(n.querySelector(".js-list-title"),(()=>{t.setTitle(a.titleObject.savedValue),a.titleObject.em.contentEditable=!1,a.focus()}),{maxLength:p.maxTitleLength,autoDisable:!0}),a.titleObject.em.title=a.titleObject.em.textContent=t.title,a}}new d(p.selectAllCheckbox,(()=>p.selectAll()),(()=>p.clearSelection()));const y=new i({content:document.querySelector(".js-app-menu"),toggleButton:t.querySelector(".js-app-menu-toggle-button")});new o(y.toggleButton,"App menu");for(const t of y.content.querySelectorAll(".js-accordion"))new n(t,!0);class v{constructor(t,e,i){this.carousel=t,this.slider=t.querySelector(".js-carousel-slider"),this.slideCollection=this.slider.getElementsByTagName("LI"),this.prevButton=t.querySelector(".js-carousel-prev-button"),this.nextButton=t.querySelector(".js-carousel-next-button"),new o(this.prevButton,"Previous"),new o(this.nextButton,"Next"),this.offset=0,this.sliderConfig=e,this.sliderConfig&&(this.slider.classList.add("carousel__slider--auto-slide-generation"),[...this.slideCollection][Math.floor(this.slideCollection.length/2)].classList.add("is-current")),this.minOffset=i?.minOffset||0,this.maxOffset=i?.maxOffset||0,this.prevButton.addEventListener("click",(()=>{this.spin("left")})),this.nextButton.addEventListener("click",(()=>{this.spin("right")}))}spin(t){if(this.sliderConfig){if("right"===t&&this.offset<this.maxOffset){const t=document.createElement("li");t.classList.add("carousel__slide"),t.append(this.sliderConfig.createNextSlide()),this.slider.append(t),t.classList.add("carousel__slide--spin-right"),t.getAnimations().find((t=>"carousel-spin-right"===t.animationName)).finished.then((()=>t.classList.remove("carousel__slide--spin-right"))).catch((()=>{})),this.slideCollection[0].remove(),this.setSlide(this.offset+1)}else if("left"===t&&this.offset>this.minOffset){const t=document.createElement("li");t.classList.add("carousel__slide"),t.append(this.sliderConfig.createPrevSlide()),this.slider.prepend(t),t.classList.add("carousel__slide--spin-left"),t.getAnimations().find((t=>"carousel-spin-left"===t.animationName)).finished.then((()=>t.classList.remove("carousel__slide--spin-left"))).catch((()=>{})),this.slideCollection[this.slideCollection.length-1].remove(),this.setSlide(this.offset-1)}[...this.slideCollection].find((t=>t.classList.contains("is-current"))).classList.remove("is-current"),[...this.slideCollection][Math.floor(this.slideCollection.length/2)].classList.add("is-current"),this.onSliderSpin?.call(this)}}setSlide(t){this.offset=t,this.offset<=this.minOffset?(this.prevButton.disabled=!0,this.nextButton.disabled=!1):this.offset>=this.maxOffset?(this.prevButton.disabled=!1,this.nextButton.disabled=!0):(this.prevButton.disabled=!1,this.nextButton.disabled=!1)}}class b{ondaychange=null;onmonthchange=null;onyearchange=null;constructor(t,i=new Date(Date.parse("0001")),s=new Date(1e4,0,0)){new Date,this.fieldset=t,this.date=new Date,this.min=i,this.max=s,this.lang=navigator.language,this.dateFormatParts=new Intl.DateTimeFormat(this.lang).formatToParts(),this.dayInput=t.querySelector(".js-date-input"),this.dayInput.value=this.dateFormatParts.find((t=>"day"===t.type)).value,this.dayInput.placeholder="dd",this.dayInput.maxLength=2,Object.defineProperty(this.dayInput,"max",{get:()=>new Date(Number(this.yearInput.value),Number(this.monthInput.value),0).getDate()}),this.monthInput=t.querySelector(".js-month-input"),this.monthInput.value=this.dateFormatParts.find((t=>"month"===t.type)).value,this.monthInput.placeholder="mm",this.monthInput.maxLength=2,this.monthInput.max=12,this.yearInput=t.querySelector(".js-year-input"),this.yearInput.value=this.dateFormatParts.find((t=>"year"===t.type)).value,this.yearInput.placeholder="yyyy",this.yearInput.maxLength=4,this.yearInput.max=new Date(1e4,0,0).getFullYear(),this.inputArray=[this[`${this.dateFormatParts[0].type}Input`],this[`${this.dateFormatParts[2].type}Input`],this[`${this.dateFormatParts[4].type}Input`]],this.inputArray[0].id="date-fieldset__first-input",this.inputArray.forEach(((t,e)=>{t.min=1,t.style.width=`${t.value.length+.5}ch`,t.addEventListener("focus",(()=>{t.select(),t.onbeforeinput=t=>{"0"===t.data&&t.preventDefault()}})),t.addEventListener("click",(()=>{t.select()})),t.addEventListener("beforeinput",(t=>{(" "===t.data||isNaN(Number(t.data)))&&t.preventDefault()})),t.addEventListener("input",(i=>{t.style.width=`${t.value.length+.5}ch`,Number(t.value)>Number(t.max)&&(t.value=Number(t.max)),this.set(t),t.value.length>=Number(t.maxLength)?this.inputArray[e+1]?.focus():t.onbeforeinput=null,t===this.dayInput?Number(t.value[0])>4&&this.inputArray[e+1]?.focus():t===this.monthInput?Number(t.value[0])>1&&this.inputArray[e+1]?.focus():t===this.yearInput&&t.value.length>3&&t.blur()})),t.addEventListener("keydown",(i=>{"Escape"===i.key?t.blur():"Backspace"===i.key||"Delete"===i.key?t.value="":"Enter"===i.key||"ArrowRight"===i.key?(i.preventDefault(),this.inputArray[e+1]?.focus()):"ArrowLeft"===i.key?(i.preventDefault(),this.inputArray[e-1]?.focus()):"ArrowUp"===i.key?(i.preventDefault(),t.value=Math.min(Number(t.value)+1,Number(t.max)),this.set(t),t.select()):"ArrowDown"===i.key&&(i.preventDefault(),t.value=Math.max(Number(t.value)-1,Number(t.min)),this.set(t),t.select())}))})),this.literal=document.createElement("span"),this.literal.classList.add("date-fieldset__literal"),this.literal.textContent=this.dateFormatParts.find((t=>"literal"===t.type)).value,this.updateDateFieldsetFormat(),this.resetButton=this.fieldset.querySelector(".js-date-fieldset-reset-button"),this.resetButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.resetButton.addEventListener("click",(t=>{this.setCurrent()})),new o(this.resetButton,"Reset date")}set(t){if(t===this.dayInput)this.date.setDate(Number(t.value)),this.ondaychange?.();else if(t===this.monthInput){const e=new Date(this.date.getFullYear(),Number(t.value)-1+1,0).getDate();this.date.getDate()>=e&&(this.date.setDate(e),this.dayInput.value=this.date.getDate()),this.date.setMonth(Number(t.value)-1),this.onmonthchange?.()}else if(t===this.yearInput){const e=new Date(Number(t.value),this.date.getMonth()+1,0).getDate();this.date.getDate()>=e&&(this.date.setDate(e),this.dayInput.value=this.date.getDate()),this.date.setFullYear(Number(t.value)),this.onyearchange?.()}t.style.width=`${t.value.length+.5}ch`}updateValues(){this.dayInput.value=this.date.getDate(),this.monthInput.value=this.date.getMonth()+1,this.yearInput.value=this.date.getFullYear(),this.inputArray.map((t=>t.style.width=`${t.value.length+.5}ch`))}setCurrent(){this.date=new Date,this.onyearchange?.(),this.onmonthchange?.(),this.ondaychange?.(),this.updateValues()}updateDateFieldsetFormat(){this.inputArray[0].after(this.literal,this.inputArray[1],this.literal.cloneNode(!0),this.inputArray[2])}get maxDays(){return new Date(Number(this.yearInput.value),Number(this.monthInput.value),0).getDate()}getString(){return new Intl.DateTimeFormat(this.lang).format(this.date)}}Date.compare=function(t,e){return t||e?t?e?("number"==typeof t&&(t=new Date(t)),"number"==typeof e&&(e=new Date(e)),t.getFullYear()>e.getFullYear()||t.getFullYear()===e.getFullYear()&&t.getMonth()>e.getMonth()||t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()>e.getDate()?1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()?0:-1):-1:1:0};class S{constructor(t,i,s,n,a,r){this.input=t,this.submitButton=i,this.submit=s,this.validityConfig=n,this.resetButton=r,this.reset=a;const l=this.input.closest(".js-input-container"),d=document.importNode(document.querySelector(".js-input-error-hint-t").content,!0).querySelector(".js-input-error-hint");this.errorTooltip=new o(d),this.errorTooltip.disable(),l.append(d),this.input.addEventListener("input",(t=>{this.validate()})),this.input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.submitButton.click()})),this.input.addEventListener("blur",(t=>{this.release()})),this.submitButton.addEventListener("mousedown",(t=>{this.validate()&&e(t.currentTarget,t,"lt")})),this.submitButton.addEventListener("click",(t=>{this.validate()&&(this.submit(),this.reset())})),this.resetButton?.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.resetButton?.addEventListener("click",(t=>{this.reset()}))}validate(){return this.validityConfig.valueMissing&&!this.input.value.trim().length?(this.errorTooltip.changeContent("Please enter some text."),this.warn(),!1):this.validityConfig.maxLength&&this.input.value.length>this.validityConfig.maxLength?(this.errorTooltip.changeContent(`The text should be no longer than ${this.validityConfig.maxLength} characters.`),this.warn(),!1):(this.release(),!0)}warn(){this.errorTooltip.disabled=!1,this.errorTooltip.moveToBody(),this.input.classList.add("is-invalid"),this.input.focus()}release(){this.input.classList.remove("is-invalid"),this.errorTooltip.disable()}}const w=t.querySelector(".js-todo-form"),L=new class extends b{selectedDate=null;constructor(t,i,n){super(t.querySelector(".js-calendar-fieldset"),i,n),this.em=t,this.dateContainer=this.em.querySelector(".js-calendar-date-container"),this.monthSelect=new s(this.em.querySelector(".js-calendar-month-select"),[()=>this.selectMonth(this.monthSelect.items.activeIndex)],{type:"single"}),new o(this.monthSelect.toggleButton,"Select month"),this.monthCarousel=new v(this.em.querySelector(".js-calendar-month-carousel"),{createNextSlide:()=>{const t=document.createElement("span");return t.classList.add("js-inner-text"),t.textContent=new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(this.date.getFullYear(),this.date.getMonth()+2,this.date.getDate())),t},createPrevSlide:()=>{const t=document.createElement("span");return t.classList.add("js-inner-text"),t.textContent=new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(this.date.getFullYear(),this.date.getMonth()-2,this.date.getDate())),t}},{minOffset:12*(new Date(Date.parse("0001")).getFullYear()-this.date.getFullYear())+1,maxOffset:12*(new Date(1e4,0,0).getFullYear()-this.date.getFullYear())+12}),this.monthCarousel.nextButton.addEventListener("click",(()=>{this.selectMonth(this.date.getMonth()+1)})),this.monthCarousel.prevButton.addEventListener("click",(()=>{this.selectMonth(this.date.getMonth()-1)})),this.yearCarousel=new v(this.em.querySelector(".js-calendar-year-carousel"),{createNextSlide:()=>new Intl.DateTimeFormat(this.lang,{year:"numeric"}).format(new Date(this.date.getFullYear()+2,this.date.getMonth(),this.date.getDate())),createPrevSlide:()=>new Intl.DateTimeFormat(this.lang,{year:"numeric"}).format(new Date(this.date.getFullYear()-2,this.date.getMonth(),this.date.getDate()))},{minOffset:new Date(Date.parse("0001")).getFullYear()-this.date.getFullYear(),maxOffset:new Date(1e4,0,0).getFullYear()-this.date.getFullYear()}),this.yearCarousel.nextButton.addEventListener("click",(()=>{this.selectYear(this.date.getFullYear()+1)})),this.yearCarousel.prevButton.addEventListener("click",(()=>{this.selectYear(this.date.getFullYear()-1)})),(this.clearButton=this.em.querySelector(".js-calendar-clear-button"))&&(this.clearButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),this.clearButton.addEventListener("click",(t=>{this.clearDate()}))),(this.saveButton=this.em.querySelector(".js-calendar-save-button"))&&(this.saveButton.addEventListener("mousedown",(t=>{this.validate()&&e(t.currentTarget,t,"lt")})),this.saveButton.addEventListener("click",(t=>{this.validate()&&this.saveDate()}))),this.updateCalendarFormat(),this.onyearchange=()=>{this.updateYear(),this.updateDays()},this.onmonthchange=()=>{this.updateMonth(),this.updateYear(),this.updateDays()},this.ondaychange=()=>{this.updateDays(!0)}}updateDays(t){if(t){const t=[...this.dateContainer.querySelectorAll(".js-calendar-date:not(.is-disabled)")];return t.find((t=>t.classList.contains("is-selected")))?.classList.remove("is-selected"),void t.find((t=>Number(t.textContent.trim())===this.date.getDate()))?.classList.add("is-selected")}const e=g(this.lang);let i=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay()-e;i<0&&(i+=7);const s=new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate(),n=new Date(this.date.getFullYear(),this.date.getMonth(),0).getDate(),o=document.createDocumentFragment(),a=35>=i+s?35:42;for(let t=1;t<=a;t++){const e=document.importNode(this.em.querySelector(".js-calendar-date-t").content,!0).querySelector(".js-calendar-date");t>i&&t<=i+s?(e.textContent=t-i,this.validate()?(t-i===(new Date).getDate()&&e.classList.add("is-current"),t-i===this.date.getDate()&&e.classList.add("is-selected"),e.addEventListener("click",(()=>{this.selectDay(t-i)}))):e.disabled=!0):t<=i?(e.textContent=n-(i-t),e.disabled=!0):t>i+s&&(e.textContent=t-(i+s),e.disabled=!0),o.append(e)}this.dateContainer.replaceChildren(o)}selectDay(t){this.date.setDate(t),this.updateValues(),this.ondaychange()}updateMonth(){[...this.monthCarousel.slideCollection].forEach(((t,e)=>{t.textContent=new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(this.date.getFullYear(),0===e?this.date.getMonth()-1:1===e?this.date.getMonth():2===e&&this.date.getMonth()+1,this.date.getDate()))})),this.monthSelect.select(this.date.getMonth(),!0)}selectMonth(t){this.monthCarousel.setSlide(12*(this.date.getFullYear()-(new Date).getFullYear())+t+1);const e=new Date(this.date.getFullYear(),t+1,0).getDate();this.date.getDate()>=e&&(this.date.setDate(e),this.dayInput.value=this.date.getDate()),this.date.setMonth(t),this.updateValues(),this.onmonthchange()}updateYear(){this.yearCarousel.setSlide(this.date.getFullYear()-(new Date).getFullYear()),this.monthCarousel.setSlide(12*(this.date.getFullYear()-(new Date).getFullYear())+this.date.getMonth()+1),[...this.yearCarousel.slideCollection].forEach(((t,e)=>{t.textContent=new Intl.DateTimeFormat(this.lang,{year:"numeric"}).format(Date.parse(String(0===e?this.date.getFullYear()-1:1===e?this.date.getFullYear():2===e&&this.date.getFullYear()+1).padStart(4,"0")))}))}selectYear(t){const e=new Date(t,this.date.getMonth()+1,0).getDate();this.date.getDate()>=e&&(this.date.setDate(e),this.dayInput.value=this.date.getDate()),this.date.setFullYear(t),this.updateValues(),this.onyearchange()}updateCalendarFormat(){const t=g(this.lang),e=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay()-t,i=new Date(this.date.getFullYear(),this.date.getMonth(),0).getDate(),s=this.em.querySelector(".js-calendar-weekdays").querySelectorAll(".js-calendar-weekday");for(let t=1;t<=7;t++)s[t-1].textContent=new Intl.DateTimeFormat(this.lang,{weekday:"narrow"}).format(t<=e?new Date(this.date.getFullYear(),this.date.getMonth()-1,i-(e-t)):new Date(this.date.getFullYear(),this.date.getMonth(),t-e));this.monthSelect.items.array.forEach(((t,e)=>{t.button.textContent=new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(this.date.getFullYear(),e,this.date.getDate()))})),this.monthSelect.items.array[this.date.getMonth()].button.classList.add("is-current"),this.updateMonth(),this.updateDays(),this.updateYear()}validate(){return Date.compare(this.date,this.min)<0||Date.compare(this.date,this.max)>0?(this.saveButton.disabled=!0,!1):(this.saveButton.disabled=!1,!0)}clearDate(){this.setCurrent(),this.selectedDate=null,delete this.em.dataset.selectedDate,this.clearButton.disabled=!0}saveDate(){this.selectedDate=this.date.getTime(),this.em.dataset.selectedDate=this.getString(),this.clearButton.disabled=!1}}(w.querySelector(".js-calendar"),new Date),D={form:w,input:w.querySelector(".js-todo-text-input"),calendar:L,calendarModal:new i(L.em),addButton:w.querySelector(".js-add-todo-button"),submit(){r.findCurrent().findCurrentList().addTodo(new h(this.input.value.trim(),this.calendar.selectedDate)).prepend(),this.reset()},reset(){this.input.value="",JSON.parse(localStorage.getItem("todoEditorDefaultDate"))?(this.calendar.setCurrent(),this.calendar.saveDate()):this.calendar.clearDate(),this.input.focus()}};new o(w.querySelector(".js-todo-input-kbd"),"Press / to focus on a text field"),new o(D.calendarModal.toggleButton,"Pick a date"),D.calendar.saveButton.addEventListener("click",(()=>{D.calendarModal.close()})),new S(D.input,D.addButton,(()=>D.submit()),{valueMissing:!0,maxLength:h.maxContentLength},(()=>D.reset())),new o(D.addButton,"Click or press Enter to add todo");const E=p.emptyEm.querySelector(".js-todo-list-empty-input-anchor");E.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"lt")})),E.addEventListener("click",(t=>{D.input.focus()})),w.querySelector(".js-todo-form-input-container");const x=document.querySelector(".js-list-form"),C={input:x.querySelector(".js-list-form-input"),modal:new i(x,{detached:!0}),cancelButton:x.querySelector(".js-list-form-button-cancel"),createButton:x.querySelector(".js-list-form-button-create"),submit(){const t=r.findCurrent(),e=r.findCurrent().addList(new p(C.input.value.trim()));t.switchList(e),e.prepend(),e.render(),C.reset()},reset(){this.input.value="",T.reset()}};new S(C.input,C.createButton,(()=>{C.modal.close(),C.submit()}),{valueMissing:!0,maxLength:p.maxTitleLength},(()=>{C.modal.close(),C.reset()}),C.cancelButton);const T=new class{constructor(t,e,i){this.currentEm=e.querySelector(".js-char-limiter-current"),this.maxEm=e.querySelector(".js-char-limiter-max"),this.currentEm.textContent=0,this.maxEm.textContent=i,t.addEventListener("input",(()=>{e.classList.toggle("is-inactive",t.value.length<i),e.classList.toggle("is-active",t.value.length>i),this.currentEm.textContent=t.value.length})),t.onblur=()=>{t.value||this.reset()}}reset(){this.currentEm.textContent=0}}(C.input,x.querySelector(".js-list-form-char-limiter"),p.maxTitleLength);y.relatedEmList.push(C.modal.modal),C.modal.onopen=()=>{document.forms[document.forms.length-1][0].focus()},C.modal.onclose=()=>{y.active?r.createListButton.focus():r.findCurrent().findCurrentList()&&document.forms[0][0].focus()};const k={theme:new s(y.content.querySelector(".js-theme-menu"),[{button:y.content.querySelector(".js-theme-auto"),function:()=>{A("auto")}},{button:y.content.querySelector(".js-theme-dark"),function:()=>{A("dark")}},{button:y.content.querySelector(".js-theme-light"),function:()=>{A("light")}},()=>{new c("Your changes are saved successfully!",{modificator:"app-settings-saved",type:"success"})}],{type:"single"}),defaultDate:new class{onstatetoggle=null;constructor(t,e,i,s){this.button={em:t,rectX:null},this.bar={em:t.querySelector(".js-button-switch__bar"),rectX:null,translateX:null,offset:null,offsetInitial:null,offsetMin:null,offsetMax:null,lastEvent:null,controller:new AbortController},this.bar.offsetInitial=this.bar.em.offsetLeft,this.bar.offsetStateOff=this.bar.offsetInitial,this.bar.offsetStateOn=this.button.em.clientWidth-this.bar.em.clientWidth-this.bar.offsetInitial,this.bar.offsetMin=this.bar.offsetInitial-1,this.bar.offsetMax=this.bar.offsetStateOn+1,this.fnStateOn=e,this.fnStateOff=i,this.state=s||!1,this.setState(s),this.bar.em.addEventListener("pointerdown",(t=>{this.bar.em.setPointerCapture(t.pointerId),this.bar.rectX=this.bar.em.getBoundingClientRect().x,this.bar.translateX=t.clientX-this.bar.rectX,this.button.rectX=this.button.em.getBoundingClientRect().x,this.bar.em.addEventListener("pointermove",(t=>{this.bar.em.classList.add("is-dragging"),t.movementX&&(this.lastEvent=t.type),this.bar.offset=t.clientX-this.button.rectX-this.bar.translateX,this.bar.offset>this.bar.offsetMax?this.bar.em.style.left=`${this.bar.offsetMax}px`:this.bar.offset<this.bar.offsetMin?this.bar.em.style.left=`${this.bar.offsetMin}px`:this.bar.em.style.left=`${this.bar.offset}px`}),{signal:this.bar.controller.signal})}));for(const t of this.button.em.labels)t.addEventListener("pointerdown",(t=>{this.lastEvent=t.type}));this.button.em.addEventListener("pointerdown",(t=>{this.lastEvent=t.type})),this.button.em.addEventListener("click",(t=>{"lostpointercapture"!==this.lastEvent&&"pointermove"!==this.lastEvent&&this.setState(!this.state)})),this.bar.em.addEventListener("lostpointercapture",(t=>{this.bar.em.classList.remove("is-dragging"),this.bar.controller.abort(),this.bar.controller=new AbortController,"pointermove"===this.lastEvent&&(this.bar.em.getBoundingClientRect().x+this.bar.em.clientWidth/2>=this.button.rectX+this.button.em.clientWidth/2?this.state?this.bar.em.style.left=`${this.bar.offsetStateOn}px`:this.setState(!0):this.state?this.setState(!1):this.bar.em.style.left=`${this.bar.offsetStateOff}px`)}))}setState(t){this.state=t,t?(this.fnStateOn(),this.button.em.classList.replace("is-inactive","is-active"),this.bar.em.style.left=`${this.bar.offsetStateOn}px`):(this.fnStateOff(),this.button.em.classList.replace("is-active","is-inactive"),this.bar.em.style.left=`${this.bar.offsetStateOff}px`),this.onstatetoggle?.()}}(y.content.querySelector("#default-date-switch"),(function(){localStorage.setItem("todoEditorDefaultDate",!0),D.calendar.selectedDate||D.calendar.saveDate()}),(function(){localStorage.setItem("todoEditorDefaultDate",!1)}),JSON.parse(localStorage.getItem("todoEditorDefaultDate")))};function A(t){"auto"===t?(window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light"),localStorage.setItem("theme",t)):(document.documentElement.dataset.theme=t,localStorage.setItem("theme",t)),k.theme.select(k.theme.items.array.find((e=>e.button.classList.contains(`js-theme-${t}`))),!0);const e=document.createElementNS("http://www.w3.org/2000/svg","use");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","auto"===t?"#svg-circle-half-fill":"dark"===t?"#svg-moon-stars-fill":"light"===t&&"#svg-sun-fill"),k.theme.toggleButton.labelIcon.replaceChildren(e)}k.theme.toggleButton.labelIcon=y.content.querySelector(".js-settings-label-icon"),k.defaultDate.onstatetoggle=()=>{new c("Your changes are saved successfully!",{modificator:"app-settings-saved",type:"success"})};const B=document.querySelector(".js-footer");new class{constructor(t){this.lang=navigator.language,this.options={year:"numeric",month:"short",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric"},t.children.length?((this.time=t.querySelector(".js-date-display-time"))&&(this.timeOptions={timeStyle:"medium"}),(this.date=t.querySelector(".js-date-display-date"))&&(this.dateOptions={year:"numeric",month:"short",day:"numeric",weekday:"long"}),this.time.textContent=Intl.DateTimeFormat(this.lang,this.timeOptions).format(new Date),this.date.textContent=Intl.DateTimeFormat(this.lang,this.dateOptions).format(new Date),setInterval((()=>{this.time.textContent=Intl.DateTimeFormat(this.lang,this.timeOptions).format(new Date),this.date.textContent=Intl.DateTimeFormat(this.lang,this.dateOptions).format(new Date)}),1e3)):(t.textContent=Intl.DateTimeFormat(this.lang,this.options).format(new Date),setInterval((()=>{t.textContent=Intl.DateTimeFormat(this.lang,this.options).format(new Date)}),1e3))}}(B.querySelector(".js-date-display"));const j={em:B.querySelector(".js-list-info"),titleObject:new u(B.querySelector(".js-list-title"),(function(){r.findCurrent().findCurrentList().setTitle(j.titleObject.savedValue)}),{maxLength:p.maxTitleLength}),finishedCount:B.querySelector(".js-list-finished-count"),itemCount:B.querySelector(".js-list-item-count"),update(){const t=r.findCurrent().findCurrentList();this.finishedCount.innerText=t.finishedCount,this.itemCount.innerText=t.todoArray.length,this.titleObject.em.textContent=this.titleObject.em.title=t.title}};p.onupdate.push((()=>{j.update()}));const I=new s(B.querySelector(".js-list-menu"),[{button:B.querySelector(".js-create-list-btn"),function(){C.modal.open()}},{button:B.querySelector(".js-change-title-list-btn"),function(){j.titleObject.em.focus()}},{button:B.querySelector(".js-delete-list-btn"),function(){r.findCurrent().findCurrentList().delete()}}]);new o(I.toggleButton,"List options");const F=t.querySelector(".js-list-controls"),q={customArray:[],activeListId:null,activeFilter:"all",activeSort:"addDate",resetButton:F.querySelector(".js-list-controls-reset-button"),submit(){const t=r.findCurrent().findCurrentList();this.activeListId=t.id,this.customArray=p.filter(t.todoArray,this.activeFilter),this.customArray=p.sort(this.customArray,this.activeSort),t.render(this.customArray),"all"===this.activeFilter&&"addDate"===this.activeSort?this.resetButton.disabled=!0:this.resetButton.disabled=!1},filter:new s(F.querySelector(".js-filter-menu"),[{button:F.querySelector(".js-filter--all"),function:()=>{q.activeFilter="all",q.submit()}},{button:F.querySelector(".js-filter--this-day"),function:()=>{q.activeFilter="thisDay",q.submit()}},{button:F.querySelector(".js-filter--this-week"),function:()=>{q.activeFilter="thisWeek",q.submit()}},{button:F.querySelector(".js-filter--this-month"),function:()=>{q.activeFilter="thisMonth",q.submit()}},{button:F.querySelector(".js-filter--this-year"),function:()=>{q.activeFilter="thisYear",q.submit()}}],{type:"single"}),sort:new s(F.querySelector(".js-sort-menu"),[{button:F.querySelector(".js-sort--add-date"),function:()=>{q.activeSort="addDate",q.submit()}},{button:F.querySelector(".js-sort--due-date"),function:()=>{q.activeSort="dueDate",q.submit()}},{button:F.querySelector(".js-sort--active-first"),function:()=>{q.activeSort="activeFirst",q.submit()}},{button:F.querySelector(".js-sort--finished-first"),function:()=>{q.activeSort="finishedFirst",q.submit()}}],{type:"single"}),manage:new s(F.querySelector(".js-list-options-menu"),[{button:F.querySelector(".js-manage--delete-finished"),function(){r.findCurrent().findCurrentList().deleteFinished()}},{button:F.querySelector(".js-manage--finish-all"),function(){r.findCurrent().findCurrentList().finishAll()}},{button:F.querySelector(".js-manage--delete-all"),function(){r.findCurrent().findCurrentList().deleteAll()}}]),selection:{deleteButton:F.querySelector(".js-todo-selection-delete"),finishButton:F.querySelector(".js-todo-selection-finish"),closeButton:F.querySelector(".js-todo-selection-reset")},reset(){q.activeFilter="all",q.activeSort="addDate",[this.filter,this.sort].map((t=>t.select(0,!0)))}};q.resetButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),q.resetButton.addEventListener("click",(t=>{q.reset(),q.submit()})),new o(q.filter.toggleButton,"Select filtering option"),new o(q.sort.toggleButton,"Select sorting option"),new o(q.resetButton,"Reset to default"),new o(q.manage.toggleButton,"More options"),new o(q.selection.deleteButton,"Delete selected"),new o(q.selection.finishButton,"Finish selected"),new o(q.selection.closeButton,"Cancel"),q.selection.deleteButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),q.selection.deleteButton.addEventListener("click",(t=>{r.findCurrent().findCurrentList().deleteTodos(p.selectedTodoArray),p.clearSelection()})),q.selection.finishButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),q.selection.finishButton.addEventListener("click",(t=>{r.findCurrent().findCurrentList().finishTodos(p.selectedTodoArray),p.clearSelection()})),q.selection.closeButton.addEventListener("mousedown",(t=>{e(t.currentTarget,t,"dk")})),q.selection.closeButton.addEventListener("click",(t=>{p.clearSelection()})),p.onswitch.push((()=>{q.reset(),q.resetButton.disabled=!0}));A(localStorage.getItem("theme")||"auto"),function(){const t=r.findCurrent(),e=JSON.parse(localStorage.getItem("listCollection"));if(localStorage.getItem("user")){Object.assign(t,e);for(let e=0;e<t.listArray.length;e++){t.listArray[e]=new p(t.listArray[e]);const i=t.listArray[e].todoArray;for(let t=0;t<i.length;t++)i[t]=new h({...i[t]})}}else{const e=new p;e.current=!0;const i=new h({id:1,content:"Make your first todo!",dueDate:null,state:"active",listId:e.id});e.todoArray.push(i),t.listArray.push(e),localStorage.setItem("user",!0)}t.render(),t.findCurrentList()?.render()}(),window.addEventListener("beforeunload",(t=>{r.saveToStorage()})),document.addEventListener("DOMContentLoaded",(t=>{r.findCurrent().findCurrentList()&&document.forms[document.forms.length-1][0].focus()})),document.onkeydown=t=>{"/"===t.key&&(document.activeElement.isContentEditable||(t.preventDefault(),document.forms[document.forms.length-1][0].focus()))},p.onswitch.push((()=>{document.forms[document.forms.length-1][0].focus()})),document.addEventListener("keydown",(t=>{"Enter"===t.code&&(t.preventDefault(),t.target.addEventListener("keyup",(t=>{"Enter"===t.code&&t.target.click()}),{once:!0}))}))})();